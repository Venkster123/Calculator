language: cpp

compiler:
  - gcc

env:
  - TARGET="CLI"
  - TARGET="API (Port)"

before_install:
  - mkdir $HOME/usr
  - export PATH="$HOME/usr/bin:$PATH"
  - wget https://cmake.org/files/v3.14/cmake-3.14.2-Linux-x86_64.sh
  - chmod +x cmake-3.14.2-Linux-x86_64.sh
  - ./cmake-3.14.2-Linux-x86_64.sh --prefix=$HOME/usr --exclude-subdir --skip-license

install:
  - sudo add-apt-repository -y ppa:ubuntu-toolchain-r/test
  - sudo apt-get update
  - sudo apt-get install libboost-dev
  - sudo apt-get install gcc-8
  - sudo apt-get install g++-8

before_script:
  - cd ${TRAVIS_BUILD_DIR}

script:
  - if [ "$TARGET" = "CLI" ]; then ./script/test_cli.sh fi
  - if [ "$TARGET" = "API (Port)" ]; then ./script/test_port.sh fi
